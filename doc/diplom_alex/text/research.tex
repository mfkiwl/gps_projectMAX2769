\section{ИСЛЕДОВАТЕЛЬСКИЙ РАЗДЕЛ}

% =========================== 1.1
\subsection{Параметры сигнала GPS}
\label{razdel11}
\subsubsection{Навигационные сообщения}
Каждый штатно функционирующий навигационный спутник передает навигационное сообщение, содержащее оперативную и неоперативную
навигационную информацию. Эта информация предназначена как для проведения текущих навигационных определений, так и для
планирования будущих сеансов приема \cite{yacenkov}.

Оперативная информация относится к тому спутнику, с борта которого эта информация передается, и содержит следующие данные
\cite{yacenkov, tsui}:
\begin{itemize}
\item координаты и параметры орбиты спутника в фиксированный момент времени (эфемериды);
\item сдвиг шкалы времени спутника относительно земной шкалы;
\item относительный сдвиг несущей частоты излучаемого сигнала от номинального значения;
\item код метки времени, необходимый для синхронизации аппаратуры потребителя.
\end{itemize}

Неоперативная информация относится к СНС в целом и содержит альманах системы:
\begin{itemize}
\item данные о функциональном состоянии всех спутников (альманах состояния);
\item сдвиг шкалы времени каждого спутника относительно системной шкалы (альманах фаз);
\item параметры орбит всех спутников системы (альманах орбит);
\item поправку к шкале времени относительно UTC.
\end{itemize}

\subsubsection{Формат GPS сообщений}
Код C/A является BPSK модулируемым сигналом с чиповой скоростью 1.023МГц. Однако, от "нуля до нуля" спектр составляет
2.046МГц. Каждый чип имеет длительность 977.5нс (1/1.023МГц). Полная длинна кода составляет 1023 чипа. С частотой чипа
1.023МГц, 1023 чипa составляют 1мс, поэтому длина C/A кода составляет 1мс. Этот код повторяется раз в 1мс \cite{tsui}.
Спектр C/A сигнала представлен на рисунке \ref{pic:ca_spectrum}. На рисунке \ref{pic:gps_data_format} представлена структура
сообщений навигационной системы GPS NAVSTAR \cite{tsui}.

\begin{figure}{H}
\begin{center}
\scalebox{0.5}{\includegraphics[width=1\linewidth]{./pics/gps_data_format.eps}}
\end{center}
\caption{Cтруктура сообщений навигационной системы GPS NAVSTAR}
\label{pic:gps_data_format}
\end{figure}

% ========================== 1.2
\subsection{Обзор решений в области захвата сигналов в системах беспроводной передачи}
\label{razdel12}
\subsubsection{Общие понятия}
Захват данных(data acquisition - DAQ) - это процесс регистрации данных реального мира и преобразования полученных данных в 
числовой вид, который может быть обработан на ПК. Захват данных и системы захвата данных(data acquistion systems - DAS) подразумевает
преобразование аналоговых волн в дискретные числовые значения для последующей обработки \cite{ni_acq}. В системы захвата данных входят:

\begin{itemize}
\item Сенсоры(таймеры и тд), которые конвертируют физические параметры в электрические сигналы;
\item Схемы конвертации сигналов с сенсоров в формы пригодные для конвертирования в цифровой формат;
\item АЦП, которые конвертируют информацию со схем конвертации в цифровой формат.
\end{itemize}

\begin{figure}[H]
\center{\includegraphics[width=1\linewidth]{./pics/acq_scheme.eps}}
\caption{Системы захвата данных}
\label{pic_acq}
\end{figure}

На рисунке \ref{pic_acq} отражена наиболее общая схема системы захвата сигналов. Есть датчики, аппаратное обеспечение,
преобразующее сигналы с сенсоров в сигналы пригодные для подачи на АЦП и есть набор управляющего и анализирующего ПО
на ПК \cite{ni_acq}.

Одной из существенных проблем при разработке устройств для анализа сигналов и непосредственной работе по анализу сигналов
является проблема повторяемости данных \cite{ni_article}. Для примера, при отладке ГЛОНАСС навигатора необходимо 
воспроизвести некоторую ситуацию, однажды полученную при захвате сигнала. Очевидно, что сделать это крайне сложно, потому
что сигнал меняется со временем и воспроизвести ситуацию практически невозможно. Хорошим решением данной задачи является
работа с сохраненным сигналом. В данном случае проблема воспроизведения ситуации сводится к повторной подаче сохраненного
сигнала на вход тестируемого устройства. В данный момент существует два способа получения сигнала для последующего анализа:
генерирование сигнала с заданными характеристиками, запись реального сигнала \cite{ni_article}.

\subsubsection{Портативный анализатор сигналов WiMAX (SeaMAX Mobile WiMAX Analyzer)}
Данный анализатор является IEEE 802.16e-2005 OFDMA PHY Base станцией анализа сигналов. Данная станция 
поддерживает 1.25, 3.5, 7, 8.75, 10, 14, 17.5, 20 и 28 Мгц полосы пропускания и позволяет настроить
частоту скорость захвата сигнала. SeaMAX Mobile предоставляет гибкую систему конфигурирования параметров PHY, таких как
размер БПФ и циклического префикса или выбрать опцию автоматического выбора данных параметров. Импорт IQ сигналов
из .txt файлов. Анализатор позволяет сохранять декодированные данные в шестнадцатеричныйричный или двоичный файл,
визуализировать и анализировать параметры передачи, включая смещение частоты, затухание канала
\cite{seamax_overview, seamax_pdf}.

\begin{figure}[H]
\center{\includegraphics[width=1\linewidth]{./pics/seamax_mono.eps}}
\caption{Схема работы с анализатором сигналов SeaMAX}
\label{seamax}
\end{figure}

На рисунке \ref{seamax} представлена схема работы данным анализатором \cite{seamax_pdf}. Он является частью большого комплекса по работе
с WiMAX сигналом. Сигнал создается на генераторе и подается на тестируюемое устройство (DUT), далее с него снимаются 
данные и анализируются на анализаторе. Анализатор производит захват и обработку данных в режиме реального времени и
предоставляет аналитическую информацию на консоль ПК.

\subsubsection{Vector signal generator NI PXIe-5672}
Данное устройство от компании National Instruments осуществляет генерацию сигнала специально для тестирования
GPS приложений. Генерируемый поток GPS-данных семплирован на скорости 1.5 МС/c (I/Q) с диска на скорости 6 Мб/c.
Устройство имеет встроенный HDD и интерфейс для подключения внешнего HDD. Типичная конфигурация с PXIe-5672
представлена на рисунке \ref{pic:ni_system}.

\begin{figure}[H]
\begin{center}
\scalebox{0.5}{\includegraphics[width=1\linewidth]{./pics/ni_system.eps}}
\end{center}
\caption{Система от NI с устройствами PXIe-5672 и PXI-5661}
\label{pic:ni_system}
\end{figure}

Используя GPS Simulation Toolkit, можно создать запись длинной до 12.5 мин (25 фреймов), что является полной длинной
GPS-сообщения \cite{yacenkov, tsui} (рисунок \ref{pic:gps_data_format}). Данные, семплированные со скоростью 6 Мб/с,
займут примерно 7.5 Гб. Можно сохранить запись как на одном, так и на нескольких HDD. Доступные варианты:
\begin{itemize}
\item HDD на контроллере PXI;
\item внешний RAID-контроллер, такой как NI HDD-8263 и HDD-8264;
\item внешний USB 2.0 жесткий диск.
\end{itemize}

Каждая из этих HDD-конфигураций поддерживает скорость записи более чем 20 МБ/с непрерывного потока данных.
Данные конфигурации поддерживают как генерирование, так и запись реального GPS-сигналов.

\subsubsection{Vector signal analyzer NI PXI-5661}

\subsubsection{Устройство захвата GPS сигналов softGPS}

% =============== 1.3
\subsection{Общая структура разрабатываемых программно-аппаратных средств}
\label{razdel13}

Типичной архитектурой захвата сигналов с последующей обработкой сигнала является структура с накопителем данных. В то же время
система с обработкой данных "на лету" должна оснащаться высокоскоростным интерфейсом с аппаратной платформой для обработки
сигналов. Наш выбор был обусловлен простотой, ценовой доступностью платформы и ориентацией на лабораторное применение
в высших учебных заведениях. Поэтому мы выбрали структуру с накопителем и последующей обработкой данных. К плюсам данного решения
можно отнести возможность обрабатывать одни и те же данные с использованием разных решений. К примеру, обработка на специализированных
математических пакетах таких как MATLAB, обработка на микросхемах с программируемой логикой (FPGA), реализация на языках высокого уровня.
Данное разнообразие предполагает разное количество прикладываемых усилий и может использоваться как для реализации лабораторных работ
(создание коррелятора на MATLAB), так и написание дипломных работ (реализация коррелятора на микросхемах с программируемой логикой - FPGA) и
даже для научных исследований в области обработки сигналов системы глобальной навигации Глонасс и Navitel GPS.

В условиях поставленных целей - удешевить устройство, упростить программный и аппаратный код, сделать комплекс максимально дешевым, было
выбрано оборудование для реализации аппаратной платформы захвата "сырого" сигнала систем спутниковой навигации. В рамках поставленной
задачи было выбрана система хранения данных на SRAM-микросхеме, интерфейс управления/передачи данных RS232, операционная система
сервера платы Linux, язык программирования для реализации сервера платы C.

\subsubsection{Носитель данных}
\label{razdel1_sram}
Для реализации носителя данных была выбрана микросхема памяти SRAM. Данные микросхемы достаточно дороги, но очень просты с точки зрения
реализации контроллера памяти. Контроллер памяти должен учитывать только время, на которое выставляются данные на шину данных и шину адреса,
в отличае от технологии DRAM, где требуется реализовывать интерливинг банков. В то же время используемая память должна быть достаточно
быстрой. Данные поступают со скоростью 7.7Мб/сек (скорость работы GPS-микросхемы чуть более 16Мгц, за такт микросхема выдает 4 бита, 2 такта
составляют байт данных, таким образом данные поступают с частотой чуть более 8МГц). Чтобы реализовать систему с данными характеристиками
скорость доступа к записи у микросхемы памяти должна быть не менее 125нс. Разработанный контроллер SRAM-памяти рассмотрен в разделе
\ref{razdel3_sram}

\subsubsection{Интерфейс управления/передачи данных}
\label{razdel1_rs232}
Перед интерфейсом управления и передачи данных ставится несколько задач: простота реализации, достаточная скорость передачи данных с
носителя, возможность реализации необходимого протокола команд. Наиболее распространенными интерфейсами на сегодняшний день
являются: RS232, USB, PCI. Нами был выбран первый. Его простота и универсальность позволили реализовать на данном интерфейсе протокол
управления платой, а скорость оказалась достаточной для комфортной передачи 256Кб данных с нашего носителя. Интерфейс USB был запланирован
к реализации в расширенной версии платы. Интерфейс PCI является достаточно интересным и высокоскоростным, но сложность реализации,
необходимость создания драйвером, а так же технологическая сложность стали причинами отказа от него на данном этапе. Реализация 
интерфейса рассмотрена в разделе \ref{razdel3_rs232}.

В рамках интерфейса RS232 был разработан протокол управления платой. Протокол является бинарным, длина команд фиксирована. Данные критерии
были выбраны по следующим причинам: бинарный протокол проще обрабатывать на аппаратной части системы, фиксированная длинна команд так же
упрощает разбор команд. Таким образом был разработан бинарный протокол управления платой - длина команд 64 бита, младшие 8 бит - команда,
остальные 56 бит - значение (зависит от команда). Подробнее протокол рассмотрен в главе \ref{rszdel3_mem}.

\subsubsection{ОС сервера платы}
\label{razdel1_os}
Выбор ОС для реализации сервера разработанной платы был практически безальтернативным. Наиболее распространенными бесплатными ОС
на сегодняшний день является семейство операционных систем BSD и ОС Linux. Нами был выбран Linux. ОС с проприетарным кодом Windows
нам не подошла по нескольким причинам: стоимость даже базовой версии сопоставима со стоимостью всей платы, цена средств разработки
для данной ОС достаточно высока. Под ОС Linux мы смогли использовать бесплатный компилятор, отладчики, средство контроля версий
и другое ПО для разработки.

\subsubsection{ПО управления сервера платы}
\label{razdel1_sw}
Разработанное мной ПО для управления платой является комплексным средством. Основными задачами при его разработке ставились возможность
расширения и простота использования конечными клиентом. Реализуя продукт для использования в университетах мы должны были создать
простое и бесплатное программное обеспечение, стоимость внедрения которого была бы не большой. По нашему мнению, нам это удалось.
Сервер платы должен быть гибким - полученные с платы данные могут выкладываться на любой носитель и даже записываться на CD-диски.
Так же он должен быть снабжен интерфейсом управления с графическим интерфейсом и иметь интуитивно понятный файл конфигурации. На основе
данных критериев, нами было разработано специализированное ПО. Более подробная информация о сервере платы содержится в \ref{razdel3_sw}.

\newpage
